{
  "schema_version": "1.0",
  "name": "retrieve_context",
  "version": "1.0.0",
  "api_version": "1.0",
  "min_client_version": "1.0.0",
  "deprecated_fields": [],
  "description": "Retrieve contextual information using semantic search and filtering",
  "inputSchema": {
    "type": "object",
    "properties": {
      "query": {
        "type": "string",
        "description": "Search query for semantic matching",
        "minLength": 1,
        "maxLength": 1000
      },
      "filters": {
        "type": "object",
        "description": "Optional filters to narrow results",
        "properties": {
          "type": {
            "type": "array",
            "items": {
              "type": "string",
              "enum": [
                "code",
                "design",
                "decision",
                "issue",
                "requirement",
                "documentation"
              ]
            },
            "description": "Filter by context types"
          },
          "tags": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "Filter by tags"
          },
          "priority": {
            "type": "array",
            "items": {
              "type": "string",
              "enum": ["low", "medium", "high", "critical"]
            },
            "description": "Filter by priority levels"
          },
          "author": {
            "type": "string",
            "description": "Filter by author"
          },
          "project": {
            "type": "string",
            "description": "Filter by project"
          },
          "date_range": {
            "type": "object",
            "properties": {
              "start": {
                "type": "string",
                "format": "date-time"
              },
              "end": {
                "type": "string",
                "format": "date-time"
              }
            }
          }
        }
      },
      "limit": {
        "type": "integer",
        "description": "Maximum number of results to return",
        "minimum": 1,
        "maximum": 100,
        "default": 10
      },
      "include_relationships": {
        "type": "boolean",
        "description": "Whether to include related context items",
        "default": false
      },
      "similarity_threshold": {
        "type": "number",
        "description": "Minimum similarity score for results",
        "minimum": 0.0,
        "maximum": 1.0,
        "default": 0.7
      }
    },
    "required": ["query"]
  },
  "outputSchema": {
    "type": "object",
    "properties": {
      "success": {
        "type": "boolean",
        "description": "Whether the operation succeeded"
      },
      "results": {
        "type": "array",
        "items": {
          "type": "object",
          "properties": {
            "context_id": {
              "type": "string",
              "description": "Unique identifier"
            },
            "type": {
              "type": "string",
              "description": "Context type"
            },
            "content": {
              "type": "object",
              "description": "Stored content"
            },
            "metadata": {
              "type": "object",
              "description": "Associated metadata"
            },
            "similarity_score": {
              "type": "number",
              "description": "Semantic similarity to query (0-1)"
            },
            "relationships": {
              "type": "array",
              "description": "Related context items (if requested)"
            },
            "created_at": {
              "type": "string",
              "format": "date-time"
            },
            "updated_at": {
              "type": "string",
              "format": "date-time"
            }
          },
          "required": ["context_id", "type", "content", "similarity_score"]
        }
      },
      "total_count": {
        "type": "integer",
        "description": "Total number of matching results"
      },
      "query_info": {
        "type": "object",
        "properties": {
          "search_time_ms": {
            "type": "number",
            "description": "Time taken for search in milliseconds"
          },
          "vector_search_used": {
            "type": "boolean",
            "description": "Whether vector search was used"
          },
          "filters_applied": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "List of filters that were applied"
          }
        }
      },
      "message": {
        "type": "string",
        "description": "Status message or error description"
      }
    },
    "required": ["success", "results", "total_count", "message"]
  },
  "security": {
    "rate_limits": {
      "requests_per_minute": 120,
      "burst_limit": 20
    },
    "validation": {
      "query_max_length": 1000,
      "max_results": 100,
      "sanitize_query": true
    }
  }
}
