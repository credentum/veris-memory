{
  "schema_version": "1.0",
  "name": "get_user_facts",
  "version": "1.0.0",
  "api_version": "1.0",
  "min_client_version": "1.0.0",
  "deprecated_fields": [],
  "description": "Retrieve ALL facts stored for a specific user without relying on semantic search. Ensures complete recall for queries like 'What do you know about me?'",
  "inputSchema": {
    "type": "object",
    "properties": {
      "user_id": {
        "type": "string",
        "description": "The user ID to retrieve facts for (e.g., 'matt', 'user_123')",
        "minLength": 1,
        "maxLength": 255
      },
      "limit": {
        "type": "integer",
        "description": "Maximum number of facts to return",
        "minimum": 1,
        "maximum": 200,
        "default": 50
      },
      "include_forgotten": {
        "type": "boolean",
        "description": "Whether to include soft-deleted (forgotten) facts",
        "default": false
      }
    },
    "required": ["user_id"]
  },
  "outputSchema": {
    "type": "object",
    "properties": {
      "success": {
        "type": "boolean",
        "description": "Whether the operation succeeded"
      },
      "user_id": {
        "type": "string",
        "description": "The user ID that was queried"
      },
      "facts": {
        "type": "array",
        "description": "Array of facts for the user",
        "items": {
          "type": "object",
          "properties": {
            "id": {
              "type": "string",
              "description": "Unique identifier for the fact"
            },
            "fact_key": {
              "type": "string",
              "description": "The fact key (e.g., 'favorite_color', 'home_country')"
            },
            "fact_value": {
              "type": "string",
              "description": "The fact value"
            },
            "created_at": {
              "type": "string",
              "description": "When the fact was created (ISO format)"
            },
            "searchable_text": {
              "type": "string",
              "description": "Human-readable text representation"
            },
            "forgotten": {
              "type": "boolean",
              "description": "Whether the fact is soft-deleted (only present if include_forgotten=true)"
            }
          }
        }
      },
      "count": {
        "type": "integer",
        "description": "Number of facts returned"
      },
      "limit": {
        "type": "integer",
        "description": "The limit that was applied"
      },
      "has_more": {
        "type": "boolean",
        "description": "True if there may be more facts beyond the limit"
      },
      "message": {
        "type": "string",
        "description": "Human-readable status message"
      }
    },
    "required": ["success", "user_id", "facts", "count", "has_more"]
  },
  "examples": [
    {
      "name": "Get all facts for user",
      "input": {
        "user_id": "matt"
      },
      "output": {
        "success": true,
        "user_id": "matt",
        "facts": [
          {"id": "abc123", "fact_key": "first_name", "fact_value": "Matt"},
          {"id": "def456", "fact_key": "home_country", "fact_value": "Vietnam"},
          {"id": "ghi789", "fact_key": "favorite_color", "fact_value": "green"}
        ],
        "count": 3,
        "limit": 50,
        "has_more": false,
        "message": "Retrieved 3 facts for user 'matt'"
      }
    },
    {
      "name": "Get facts with limit",
      "input": {
        "user_id": "matt",
        "limit": 2
      },
      "output": {
        "success": true,
        "user_id": "matt",
        "facts": [
          {"id": "abc123", "fact_key": "first_name", "fact_value": "Matt"},
          {"id": "def456", "fact_key": "home_country", "fact_value": "Vietnam"}
        ],
        "count": 2,
        "limit": 2,
        "has_more": true,
        "message": "Retrieved 2 facts for user 'matt'"
      }
    }
  ],
  "security": {
    "rate_limits": {
      "requests_per_minute": 60,
      "burst_limit": 10
    },
    "validation": {
      "user_id_max_length": 255
    }
  },
  "notes": [
    "This endpoint queries Neo4j directly, not semantic search",
    "Use this for 'What do you know about me?' type queries",
    "Falls back to filtered vector search if Neo4j unavailable",
    "Requires authentication with reader or writer role"
  ]
}
