# Docker Compose Override for Local Development
#
# This file overrides the GHCR images in docker-compose.yml with local builds.
# Docker Compose automatically uses this file when running `docker compose up`.
#
# Production deployments use docker-compose.yml directly (pulling from GHCR).
# Local developers use this override to build images from source.
#
# Usage:
#   docker compose up --build  # Builds images locally using this override
#
# To use GHCR images locally (same as production):
#   docker compose -f docker-compose.yml up  # Skips override file

services:
  # Context Store MCP Server - Build locally from source
  context-store:
    build:
      context: .
      dockerfile: dockerfiles/Dockerfile
    # Override the GHCR image with local build
    image: veris-memory/context-store:local

  # REST API Server - Build locally from source
  api:
    build:
      context: .
      dockerfile: dockerfiles/Dockerfile.api
    image: veris-memory/api:local

  # Monitoring Dashboard - Build locally from source
  monitoring-dashboard:
    build:
      context: .
      dockerfile: dockerfiles/Dockerfile
    image: veris-memory/monitoring-dashboard:local

  # Sentinel - Build locally from source
  sentinel:
    build:
      context: .
      dockerfile: dockerfiles/Dockerfile.sentinel
    image: veris-memory/sentinel:local
